{"version":3,"file":"supportability-review-app-105.0.0-up0.1.0.umd.min.edit.js","mappings":"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","sources":["webpack://supportability-review-app-105.0.0-up0.1.0/./edit/sr.cattle.io.reviewbundle.vue","webpack://supportability-review-app-105.0.0-up0.1.0/./edit/sr.cattle.io.reviewbundle.vue?a0f5"],"sourcesContent":["<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport { NORMAN } from '@shell/config/types';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport Tolerations from '@shell/components/form/Tolerations';\nimport LabeledInput from '@components/Form/LabeledInput/LabeledInput.vue';\nimport TextAreaAutoGrow from '@components/Form/TextArea/TextAreaAutoGrow.vue';\nexport default {\n  name: 'ReviewBundleEditView',\n  components: {\n    Checkbox,\n    CruResource,\n    Loading,\n    Tolerations,\n    LabeledInput,\n    TextAreaAutoGrow\n  },\n  mixins: [CreateEditView],\n  props: {\n    value: {\n      type: Object,\n      required: true\n    },\n    mode: {\n      type: String,\n      required: true\n    },\n    resource: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    if (!this.value.metadata.name) {\n      this.value.metadata.generateName = 'review-bundle-';\n    }\n    if (!this.value.spec) {\n      this.value.spec = {};\n    }\n    this.value.spec.analyzeClusters = ['local'];\n    this.value.spec.sonobuoyNamespace = 'sonobuoy';\n    if (this.isCreate()) {\n      this.createApiToken()\n        .then((token) => {\n          this.value.spec.token = token;\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    }\n    return {\n      analyzeLocalOnly: true,\n      description: '',\n      customName: '',\n      dropdownOptions: ['review-bundle', 'custom-bundle'],\n      showDropdown: false\n    };\n  },\n  computed: {\n    isView() {\n      return this.mode !== _CREATE && this.mode !== _EDIT;\n    },\n    editorMode() {\n      if (!this.isView) {\n        return EDITOR_MODES.EDIT_CODE;\n      }\n\n      return EDITOR_MODES.VIEW_CODE;\n    },\n    hasBeenCreated() {\n      return !!this.value.id;\n    }\n  },\n  watch: {\n    analyzeLocalOnly(neu) {\n      if (neu) {\n        this.value.spec.analyzeClusters = ['local'];\n      } else {\n        this.value.spec.analyzeClusters = [];\n      }\n    }\n  },\n  methods: {\n    async createApiToken() {\n      const maxTTLMsec = 4 * 60 * 60 * 1000; // 4 hours\n\n      const token = await this.$store.dispatch('rancher/create', {\n        type: NORMAN.TOKEN,\n        ttl: maxTTLMsec,\n        description: 'Supportability Review'\n      });\n\n      const created = await token.save();\n\n      return created.token;\n    },\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n    setDefaultName() {\n      this.value.metadata.generateName = this.value.metadata.generateName\n        .toLowerCase()\n        .replace(/\\s+/g, '-')\n        .replace(/[^a-z0-9-]/g, '')\n        .replace(/^-+/, '')\n        .slice(0, 30);\n\n      if (!this.value.metadata.generateName.trim()) {\n        this.value.metadata.generateName = 'review-bundle-';\n      }\n      if (!this.value.metadata.generateName.endsWith('-')) {\n        this.value.metadata.generateName += '-';\n      }\n    },\n    setDefaultSonobuoyNamespace() {\n      if (!this.value.spec.sonobuoyNamespace.trim()) {\n        this.value.spec.sonobuoyNamespace = 'sonobuoy';\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    :validation-passed=\"isFormValid\"\n    @error=\"(e) => (errors = e)\"\n    @finish=\"save\"\n    @cancel=\"done\">\n    <div>\n      <h1 class=\"mb-200\">Collector</h1>\n\n      <h3 class=\"mb-200\">Bundle Name</h3>\n      <LabeledInput\n        v-model:value=\"value.metadata.generateName\"\n        label=\"Enter Bundle Name\"\n        subLabel=\"Use lowercase letters, max 30 characters. Spaces will be replaced with '-' automatically.\"\n        placeholder=\"review-bundle\"\n        :maxlength=\"30\"\n        @blur=\"setDefaultName\" />\n\n      <h3 class=\"mt-40 mb-200\">Bundle Description</h3>\n      <TextAreaAutoGrow placeholder=\"Enter bundle description\" autocapitalize=\"off\" />\n\n      <h3 class=\"mt-10 mb-200\">Sonobuoy Namespace</h3>\n      <LabeledInput\n        v-model:value=\"value.spec.sonobuoyNamespace\"\n        placeholder=\"sonobuoy\"\n        :maxlength=\"64\"\n        @blur=\"setDefaultSonobuoyNamespace\" />\n\n      <h3 class=\"mt-10 mb-200\" for=\"tolerations\">Tolerations</h3>\n      <Tolerations v-model:value=\"value.spec.tolerations\" :mode=\"mode\" />\n    </div>\n    <div>\n      <h1 class=\"mt-10 mb-200\">Analyzer</h1>\n\n      <h3 class=\"mt-20\">Target cluster</h3>\n      <div class=\"col span-8 mb-20\">\n        <Checkbox v-model:value=\"analyzeLocalOnly\" :label=\"t('sr.reviewBundle.analyzeLocalOnly')\" :mode=\"mode\" />\n      </div>\n    </div>\n  </CruResource>\n</template>\n<style scoped></style>\n","import { render } from \"./sr.cattle.io.reviewbundle.vue?vue&type=template&id=697373d4\"\nimport script from \"./sr.cattle.io.reviewbundle.vue?vue&type=script&lang=js\"\nexport * from \"./sr.cattle.io.reviewbundle.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","for","$props","value","_createBlock","_component_CruResource","_ctx","doneRoute","mode","resource","errors","isFormValid","onError","_cache","e","onFinish","save","onCancel","done","_hoisted_1","_hoisted_2","_createVNode","_component_LabeledInput","metadata","generateName","$event","label","subLabel","placeholder","maxlength","onBlur","$options","setDefaultName","_hoisted_3","_component_TextAreaAutoGrow","autocapitalize","_hoisted_4","spec","sonobuoyNamespace","setDefaultSonobuoyNamespace","_hoisted_5","_component_Tolerations","tolerations","_hoisted_6","_hoisted_7","_hoisted_8","_component_Checkbox","$data","analyzeLocalOnly","t","_component_Loading","key","name","components","Checkbox","CruResource","Loading","Tolerations","LabeledInput","TextAreaAutoGrow","mixins","CreateEditView","props","type","Object","required","String","data","this","analyzeClusters","isCreate","createApiToken","then","token","catch","error","console","description","customName","dropdownOptions","showDropdown","computed","isView","_CREATE","_EDIT","editorMode","EDITOR_MODES","VIEW_CODE","EDIT_CODE","hasBeenCreated","id","watch","neu","methods","maxTTLMsec","$store","dispatch","NORMAN","TOKEN","ttl","created","toLowerCase","replace","slice","trim","endsWith","__exports__","render"],"sourceRoot":""}