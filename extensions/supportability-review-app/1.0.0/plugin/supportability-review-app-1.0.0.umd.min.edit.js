(("undefined"!==typeof self?self:this)["webpackJsonpsupportability_review_app_1_0_0"]=("undefined"!==typeof self?self:this)["webpackJsonpsupportability_review_app_1_0_0"]||[]).push([[1],{b999:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return e.value?a("CruResource",{attrs:{"done-route":e.doneRoute,"can-yaml":!0,mode:e.mode,resource:e.value,errors:e.errors,"validation-passed":e.isFormValid},on:{error:a=>e.errors=a,finish:e.save,cancel:e.done}},[a("div",[a("h1",{staticClass:"mb-200"},[e._v("Collector")]),a("h3",{staticClass:"mb-200"},[e._v("Bundle Name")]),a("LabeledInput",{attrs:{label:"Enter Bundle Name",subLabel:"Use lowercase letters, max 30 characters. Spaces will be replaced with '-' automatically.",placeholder:"review-bundle",maxlength:30},on:{blur:e.setDefaultName},model:{value:e.value.metadata.generateName,callback:function(a){e.$set(e.value.metadata,"generateName",a)},expression:"value.metadata.generateName"}}),a("h3",{staticClass:"mt-40 mb-200"},[e._v("Bundle Description")]),a("TextAreaAutoGrow",{attrs:{placeholder:"Enter bundle description",autocapitalize:"off"}}),a("h3",{staticClass:"mt-10 mb-200"},[e._v("Sonobuoy Namespace")]),a("LabeledInput",{attrs:{placeholder:"sonobuoy",maxlength:64},on:{blur:e.setDefaultSonobuoyNamespace},model:{value:e.value.spec.sonobuoyNamespace,callback:function(a){e.$set(e.value.spec,"sonobuoyNamespace",a)},expression:"value.spec.sonobuoyNamespace"}}),a("h3",{staticClass:"mt-10 mb-200",attrs:{for:"tolerations"}},[e._v("Tolerations")]),a("Tolerations",{attrs:{mode:e.mode},model:{value:e.value.spec.tolerations,callback:function(a){e.$set(e.value.spec,"tolerations",a)},expression:"value.spec.tolerations"}})],1),a("div",[a("h1",{staticClass:"mt-10 mb-200"},[e._v("Analyzer")]),a("h3",{staticClass:"mt-20"},[e._v("Target cluster")]),a("div",{staticClass:"col span-8 mb-20"},[a("Checkbox",{attrs:{label:e.t("sr.reviewBundle.analyzeLocalOnly"),mode:e.mode},model:{value:e.analyzeLocalOnly,callback:function(a){e.analyzeLocalOnly=a},expression:"analyzeLocalOnly"}})],1)])]):a("Loading")},o=[],l=t("15ca"),r=t("fd5f"),n=t("305c"),i=t("da25"),u=t("907c"),c=t("1032"),d=t("8d0e"),m=t("e26b"),p=t("c230"),v={name:"ReviewBundleEditView",components:{Checkbox:c["a"],CruResource:r["a"],Loading:l["a"],Tolerations:d["a"],LabeledInput:m["a"],TextAreaAutoGrow:p["a"]},mixins:[n["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0},resource:{type:String,required:!0}},data(){return this.value.metadata.name||(this.value.metadata.generateName="review-bundle-"),this.value.spec||(this.value.spec={}),this.value.spec.analyzeClusters=["local"],this.value.spec.sonobuoyNamespace="sonobuoy",this.isCreate()&&this.createApiToken().then(e=>{this.value.spec.token=e}).catch(e=>{console.error(e)}),{analyzeLocalOnly:!0,description:"",customName:"",dropdownOptions:["review-bundle","custom-bundle"],showDropdown:!1}},computed:{isView(){return this.mode!==i["q"]&&this.mode!==i["s"]},editorMode(){return this.isView?EDITOR_MODES.VIEW_CODE:EDITOR_MODES.EDIT_CODE},hasBeenCreated(){return!!this.value.id}},watch:{analyzeLocalOnly(e){this.value.spec.analyzeClusters=e?["local"]:[]}},methods:{async createApiToken(){const e=144e5,a=await this.$store.dispatch("rancher/create",{type:u["q"].TOKEN,ttl:e,description:"Supportability Review"}),t=await a.save();return t.token},isCreate(){return this.mode===i["q"]},setDefaultName(){this.value.metadata.generateName=this.value.metadata.generateName.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/^-+/,"").slice(0,30),this.value.metadata.generateName.trim()||(this.value.metadata.generateName="review-bundle-"),this.value.metadata.generateName.endsWith("-")||(this.value.metadata.generateName+="-")},setDefaultSonobuoyNamespace(){this.value.spec.sonobuoyNamespace.trim()||(this.value.spec.sonobuoyNamespace="sonobuoy")}}},h=v,b=t("2be6"),y=Object(b["a"])(h,s,o,!1,null,"697373d4",null);a["default"]=y.exports}}]);
//# sourceMappingURL=supportability-review-app-1.0.0.umd.min.edit.js.map