{"version":3,"file":"supportability-review-app-3.0.2.umd.min.edit.js","mappings":"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","sources":["webpack://supportability-review-app-3.0.2/./edit/sr.cattle.io.reviewbundle.vue","webpack://supportability-review-app-3.0.2/./edit/sr.cattle.io.reviewbundle.vue?a0f5"],"sourcesContent":["<script>\nimport CruResource from '@shell/components/CruResource.vue';\nimport Loading from '@shell/components/Loading.vue';\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\nimport Tolerations from '@shell/components/form/Tolerations';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport { NORMAN } from '@shell/config/types';\nimport { Banner } from '@components/Banner';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport LabeledInput from '@components/Form/LabeledInput/LabeledInput.vue';\nimport TextAreaAutoGrow from '@components/Form/TextArea/TextAreaAutoGrow.vue';\n\nexport default {\n  name: 'ReviewBundleEditView',\n  components: {\n    Banner,\n    Checkbox,\n    CruResource,\n    LabeledInput,\n    Loading,\n    Tabbed,\n    Tab,\n    TextAreaAutoGrow,\n    Tolerations\n  },\n  mixins: [CreateEditView],\n  props: {\n    value: {\n      type: Object,\n      required: true\n    },\n    mode: {\n      type: String,\n      required: true\n    },\n    resource: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    if (this.mode === _CREATE) {\n      if (!this.value.metadata.name) {\n        this.value.metadata.generateName = 'review-bundle-';\n      }\n      if (!this.value.spec) {\n        this.value.spec = {};\n      }\n      this.value.spec.analyzeClusters = ['local'];\n      this.value.spec.sonobuoyNamespace = 'sonobuoy';\n      this.value.spec.enablePrivileged = false;\n      this.value.spec.enableDataObfuscation = false;\n\n      this.createApiToken()\n        .then((token) => {\n          this.value.spec.token = token;\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n\n      fetch('/v3/settings/server-url', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      })\n        .then((response) => {\n          if (!response.ok) {\n            throw new Error(`HTTP error! Status: ${response.status}`);\n          }\n          return response.json();\n        })\n        .then((data) => {\n          this.value.spec.hostName = data.value;\n        })\n        .catch((error) => {\n          console.error('Fetch error:', error);\n        });\n\n      fetch('/rancherversion', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      })\n        .then((response) => {\n          if (!response.ok) {\n            throw new Error(`HTTP error! Status: ${response.status}`);\n          }\n          return response.json();\n        })\n        .then((data) => {\n          if (data.RancherPrime === 'false') {\n            this.value.spec.collectClusters = ['local'];\n            this.isPrime = false;\n          } else {\n            this.isPrime = true;\n          }\n        })\n        .catch((error) => {\n          console.error('Fetch error:', error);\n        });\n    }\n    return {\n      description: '',\n      isPrime: true,\n      generateName: 'review-bundle'\n    };\n  },\n  computed: {\n    isView() {\n      return this.mode !== _CREATE && this.mode !== _EDIT;\n    },\n    editorMode() {\n      if (!this.isView) {\n        return EDITOR_MODES.EDIT_CODE;\n      }\n\n      return EDITOR_MODES.VIEW_CODE;\n    },\n    hasBeenCreated() {\n      return !!this.value.id;\n    }\n  },\n  watch: {},\n  methods: {\n    async createApiToken() {\n      const maxTTLMsec = 4 * 60 * 60 * 1000; // 4 hours\n\n      const token = await this.$store.dispatch('rancher/create', {\n        type: NORMAN.TOKEN,\n        ttl: maxTTLMsec,\n        description: 'Supportability Review'\n      });\n\n      const created = await token.save();\n\n      return created.token;\n    },\n    setDefaultName() {\n      this.value.metadata.generateName = this.generateName\n        .toLowerCase()\n        .replace(/\\s+/g, '-')\n        .replace(/[^a-z0-9-]/g, '')\n        .replace(/^-+/, '')\n        .slice(0, 30);\n\n      if (!this.value.metadata.generateName.trim()) {\n        this.value.metadata.generateName = 'review-bundle-';\n      }\n      if (!this.value.metadata.generateName.endsWith('-')) {\n        this.value.metadata.generateName += '-';\n      }\n    },\n    setDefaultSonobuoyNamespace() {\n      if (!this.value.spec.sonobuoyNamespace.trim()) {\n        this.value.spec.sonobuoyNamespace = 'sonobuoy';\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    :validation-passed=\"isFormValid\"\n    @error=\"(e) => (errors = e)\"\n    @finish=\"save\"\n    @cancel=\"done\">\n    <Tabbed>\n      <Tab label-key=\"sr.menuLabels.basic\" name=\"basic-config\" :weight=\"3\">\n        <div>\n          <h2 class=\"mb-200\">Collector Config</h2>\n\n          <h4 class=\"mb-200\">Bundle Name</h4>\n          <LabeledInput\n            v-model:value=\"generateName\"\n            label=\"Enter Bundle Name\"\n            placeholder=\"review-bundle\"\n            :maxlength=\"30\"\n            @blur=\"setDefaultName\" />\n          <Banner class=\"mb-10\" color=\"info\">\n            <div v-clean-html=\"t('sr.menuLabels.bundleNameRestriction', {}, true)\" />\n          </Banner>\n        </div>\n      </Tab>\n      <Tab label-key=\"sr.menuLabels.advanced\" name=\"advanced-config\" :weight=\"2\">\n        <div>\n          <h2 class=\"mb-200\">Collector Config</h2>\n\n          <h4 class=\"mt-10 mb-200\">Sonobuoy Namespace</h4>\n          <LabeledInput\n            v-model:value=\"value.spec.sonobuoyNamespace\"\n            placeholder=\"sonobuoy\"\n            :maxlength=\"64\"\n            @blur=\"setDefaultSonobuoyNamespace\" />\n\n          <h4 class=\"mt-10 mb-200\" for=\"tolerations\">Tolerations</h4>\n          <Tolerations v-model:value=\"value.spec.tolerations\" :mode=\"mode\" />\n\n          <h4 class=\"mt-10 mb-200\">Security</h4>\n          <Checkbox\n            v-model:value=\"value.spec.enablePrivileged\"\n            class=\"mb-10\"\n            :label=\"t('sr.menuLabels.enablePrivileged')\" />\n          <br />\n\n          <Checkbox\n            v-model:value=\"value.spec.enableDataObfuscation\"\n            class=\"mb-10\"\n            :label=\"t('sr.menuLabels.enableDataObfuscation')\" />\n\n          <h4 class=\"mt-10 mb-200\">Bundle Description</h4>\n          <TextAreaAutoGrow\n            minHeight=\"50\"\n            placeholder=\"Enter bundle description\"\n            autocapitalize=\"off\"\n            spellcheck=\"false\" />\n        </div>\n      </Tab>\n    </Tabbed>\n    <Banner v-if=\"!isPrime\" class=\"mb-10\" color=\"info\">\n      <div v-clean-html=\"t('sr.menuLabels.forCommunityUser0', {}, true)\" />\n    </Banner>\n    <Banner v-if=\"!isPrime\" class=\"mb-10\" color=\"info\">\n      <div v-clean-html=\"t('sr.menuLabels.forCommunityUser1', {}, true)\" />\n    </Banner>\n  </CruResource>\n</template>\n<style scoped></style>\n","import { render } from \"./sr.cattle.io.reviewbundle.vue?vue&type=template&id=6839ed9c\"\nimport script from \"./sr.cattle.io.reviewbundle.vue?vue&type=script&lang=js\"\nexport * from \"./sr.cattle.io.reviewbundle.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["$props","value","_createBlock","_component_CruResource","key","_ctx","doneRoute","mode","resource","errors","isFormValid","onError","_cache","e","onFinish","save","onCancel","done","default","_withCtx","_createVNode","_component_Tabbed","_component_Tab","name","weight","_createElementVNode","class","_component_LabeledInput","$data","generateName","$event","label","placeholder","maxlength","onBlur","$options","setDefaultName","_component_Banner","color","t","_","spec","sonobuoyNamespace","setDefaultSonobuoyNamespace","for","_component_Tolerations","tolerations","_component_Checkbox","enablePrivileged","enableDataObfuscation","_component_TextAreaAutoGrow","minHeight","autocapitalize","spellcheck","isPrime","_createCommentVNode","_component_Loading","components","Banner","Checkbox","CruResource","LabeledInput","Loading","Tabbed","Tab","TextAreaAutoGrow","Tolerations","mixins","CreateEditView","props","type","Object","required","String","data","this","_CREATE","metadata","analyzeClusters","createApiToken","then","token","catch","error","console","fetch","headers","response","ok","Error","status","json","hostName","RancherPrime","collectClusters","description","computed","isView","_EDIT","editorMode","EDITOR_MODES","VIEW_CODE","EDIT_CODE","hasBeenCreated","id","watch","methods","maxTTLMsec","$store","dispatch","NORMAN","TOKEN","ttl","created","toLowerCase","replace","slice","trim","endsWith","__exports__","render"],"sourceRoot":""}