"use strict";(("undefined"!==typeof self?self:this)["webpackChunksupportability_review_app_3_0_2"]=("undefined"!==typeof self?self:this)["webpackChunksupportability_review_app_3_0_2"]||[]).push([[739],{2771:function(e,a,t){t.r(a),t.d(a,{default:function(){return y}});var o=t(9274);function l(e,a,t,l,r,n){const s=(0,o.resolveComponent)("Loading"),i=(0,o.resolveComponent)("LabeledInput"),c=(0,o.resolveComponent)("Banner"),u=(0,o.resolveComponent)("Tab"),d=(0,o.resolveComponent)("Tolerations"),m=(0,o.resolveComponent)("Checkbox"),p=(0,o.resolveComponent)("TextAreaAutoGrow"),h=(0,o.resolveComponent)("Tabbed"),v=(0,o.resolveComponent)("CruResource"),b=(0,o.resolveDirective)("clean-html");return t.value?((0,o.openBlock)(),(0,o.createBlock)(v,{key:1,"done-route":e.doneRoute,"can-yaml":!0,mode:t.mode,resource:t.value,errors:e.errors,"validation-passed":e.isFormValid,onError:a[5]||(a[5]=a=>e.errors=a),onFinish:e.save,onCancel:e.done},{default:(0,o.withCtx)(()=>[(0,o.createVNode)(h,null,{default:(0,o.withCtx)(()=>[(0,o.createVNode)(u,{"label-key":"sr.menuLabels.basic",name:"basic-config",weight:3},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("div",null,[a[6]||(a[6]=(0,o.createElementVNode)("h2",{class:"mb-200"},"Collector Config",-1)),a[7]||(a[7]=(0,o.createElementVNode)("h4",{class:"mb-200"},"Bundle Name",-1)),(0,o.createVNode)(i,{value:r.generateName,"onUpdate:value":a[0]||(a[0]=e=>r.generateName=e),label:"Enter Bundle Name",placeholder:"review-bundle",maxlength:30,onBlur:n.setDefaultName},null,8,["value","onBlur"]),(0,o.createVNode)(c,{class:"mb-10",color:"info"},{default:(0,o.withCtx)(()=>[(0,o.withDirectives)((0,o.createElementVNode)("div",null,null,512),[[b,e.t("sr.menuLabels.bundleNameRestriction",{},!0)]])]),_:1})])]),_:1}),(0,o.createVNode)(u,{"label-key":"sr.menuLabels.advanced",name:"advanced-config",weight:2},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("div",null,[a[8]||(a[8]=(0,o.createElementVNode)("h2",{class:"mb-200"},"Collector Config",-1)),a[9]||(a[9]=(0,o.createElementVNode)("h4",{class:"mt-10 mb-200"},"Sonobuoy Namespace",-1)),(0,o.createVNode)(i,{value:t.value.spec.sonobuoyNamespace,"onUpdate:value":a[1]||(a[1]=e=>t.value.spec.sonobuoyNamespace=e),placeholder:"sonobuoy",maxlength:64,onBlur:n.setDefaultSonobuoyNamespace},null,8,["value","onBlur"]),a[10]||(a[10]=(0,o.createElementVNode)("h4",{class:"mt-10 mb-200",for:"tolerations"},"Tolerations",-1)),(0,o.createVNode)(d,{value:t.value.spec.tolerations,"onUpdate:value":a[2]||(a[2]=e=>t.value.spec.tolerations=e),mode:t.mode},null,8,["value","mode"]),a[11]||(a[11]=(0,o.createElementVNode)("h4",{class:"mt-10 mb-200"},"Security",-1)),(0,o.createVNode)(m,{value:t.value.spec.enablePrivileged,"onUpdate:value":a[3]||(a[3]=e=>t.value.spec.enablePrivileged=e),class:"mb-10",label:e.t("sr.menuLabels.enablePrivileged")},null,8,["value","label"]),a[12]||(a[12]=(0,o.createElementVNode)("br",null,null,-1)),(0,o.createVNode)(m,{value:t.value.spec.enableDataObfuscation,"onUpdate:value":a[4]||(a[4]=e=>t.value.spec.enableDataObfuscation=e),class:"mb-10",label:e.t("sr.menuLabels.enableDataObfuscation")},null,8,["value","label"]),a[13]||(a[13]=(0,o.createElementVNode)("h4",{class:"mt-10 mb-200"},"Bundle Description",-1)),(0,o.createVNode)(p,{minHeight:"50",placeholder:"Enter bundle description",autocapitalize:"off",spellcheck:"false"})])]),_:1})]),_:1}),r.isPrime?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(c,{key:0,class:"mb-10",color:"info"},{default:(0,o.withCtx)(()=>[(0,o.withDirectives)((0,o.createElementVNode)("div",null,null,512),[[b,e.t("sr.menuLabels.forCommunityUser0",{},!0)]])]),_:1})),r.isPrime?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(c,{key:1,class:"mb-10",color:"info"},{default:(0,o.withCtx)(()=>[(0,o.withDirectives)((0,o.createElementVNode)("div",null,null,512),[[b,e.t("sr.menuLabels.forCommunityUser1",{},!0)]])]),_:1}))]),_:1},8,["done-route","mode","resource","errors","validation-passed","onFinish","onCancel"])):((0,o.openBlock)(),(0,o.createBlock)(s,{key:0}))}var r=t(52115),n=t(87619),s=t(63209),i=t(42411),c=t(54263),u=t(91825),d=t(14220),m=t(35664),p=t(9980),h=t(42200),v=t(8746),b=t(59378),N=t(4364),f={name:"ReviewBundleEditView",components:{Banner:p.l,Checkbox:h.S,CruResource:r.A,LabeledInput:v.A,Loading:n.A,Tabbed:s.A,Tab:i.A,TextAreaAutoGrow:b.A,Tolerations:c.A},mixins:[u.A],props:{value:{type:Object,required:!0},mode:{type:String,required:!0},resource:{type:String,required:!0}},data(){return this.mode===d.YQ&&(this.value.metadata.name||(this.value.metadata.generateName="review-bundle-"),this.value.spec||(this.value.spec={}),this.value.spec.analyzeClusters=["local"],this.value.spec.sonobuoyNamespace="sonobuoy",this.value.spec.enablePrivileged=!1,this.value.spec.enableDataObfuscation=!1,this.createApiToken().then(e=>{this.value.spec.token=e}).catch(e=>{N.error(e)}),fetch("/v3/settings/server-url",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()}).then(e=>{this.value.spec.hostName=e.value}).catch(e=>{N.error("Fetch error:",e)}),fetch("/rancherversion",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()}).then(e=>{"false"===e.RancherPrime?(this.value.spec.collectClusters=["local"],this.isPrime=!1):this.isPrime=!0}).catch(e=>{N.error("Fetch error:",e)})),{description:"",isPrime:!0,generateName:"review-bundle"}},computed:{isView(){return this.mode!==d.YQ&&this.mode!==d.G5},editorMode(){return this.isView?EDITOR_MODES.VIEW_CODE:EDITOR_MODES.EDIT_CODE},hasBeenCreated(){return!!this.value.id}},watch:{},methods:{async createApiToken(){const e=144e5,a=await this.$store.dispatch("rancher/create",{type:m.k$.TOKEN,ttl:e,description:"Supportability Review"}),t=await a.save();return t.token},setDefaultName(){this.value.metadata.generateName=this.generateName.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/^-+/,"").slice(0,30),this.value.metadata.generateName.trim()||(this.value.metadata.generateName="review-bundle-"),this.value.metadata.generateName.endsWith("-")||(this.value.metadata.generateName+="-")},setDefaultSonobuoyNamespace(){this.value.spec.sonobuoyNamespace.trim()||(this.value.spec.sonobuoyNamespace="sonobuoy")}}},C=t(47433);const w=(0,C.A)(f,[["render",l]]);var y=w}}]);
//# sourceMappingURL=supportability-review-app-3.0.2.umd.min.edit.js.map