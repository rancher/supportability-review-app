"use strict";(("undefined"!==typeof self?self:this)["webpackChunksupportability_review_app_3_0_0"]=("undefined"!==typeof self?self:this)["webpackChunksupportability_review_app_3_0_0"]||[]).push([[739],{16419:function(e,a,t){t.r(a),t.d(a,{default:function(){return A}});var o=t(9274);const l=(0,o.createElementVNode)("h1",{class:"mb-200"},"Collector",-1),n=(0,o.createElementVNode)("h3",{class:"mb-200"},"Bundle Name",-1),r=(0,o.createElementVNode)("h3",{class:"mt-40 mb-200"},"Bundle Description",-1),s=(0,o.createElementVNode)("h3",{class:"mt-10 mb-200"},"Sonobuoy Namespace",-1),u=(0,o.createElementVNode)("h3",{class:"mt-10 mb-200",for:"tolerations"},"Tolerations",-1),c=(0,o.createElementVNode)("h1",{class:"mt-10 mb-200"},"Analyzer",-1),i=(0,o.createElementVNode)("h3",{class:"mt-20"},"Target cluster",-1),d={class:"col span-8 mb-20"};function m(e,a,t,m,p,v){const h=(0,o.resolveComponent)("Loading"),b=(0,o.resolveComponent)("LabeledInput"),y=(0,o.resolveComponent)("TextAreaAutoGrow"),N=(0,o.resolveComponent)("Tolerations"),w=(0,o.resolveComponent)("Checkbox"),C=(0,o.resolveComponent)("CruResource");return t.value?((0,o.openBlock)(),(0,o.createBlock)(C,{key:1,"done-route":e.doneRoute,"can-yaml":!0,mode:t.mode,resource:t.value,errors:e.errors,"validation-passed":e.isFormValid,onError:a[4]||(a[4]=a=>e.errors=a),onFinish:e.save,onCancel:e.done},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",null,[l,n,(0,o.createVNode)(b,{value:t.value.metadata.generateName,"onUpdate:value":a[0]||(a[0]=e=>t.value.metadata.generateName=e),label:"Enter Bundle Name",subLabel:"Use lowercase letters, max 30 characters. Spaces will be replaced with '-' automatically.",placeholder:"review-bundle",maxlength:30,onBlur:v.setDefaultName},null,8,["value","onBlur"]),r,(0,o.createVNode)(y,{placeholder:"Enter bundle description",autocapitalize:"off"}),s,(0,o.createVNode)(b,{value:t.value.spec.sonobuoyNamespace,"onUpdate:value":a[1]||(a[1]=e=>t.value.spec.sonobuoyNamespace=e),placeholder:"sonobuoy",maxlength:64,onBlur:v.setDefaultSonobuoyNamespace},null,8,["value","onBlur"]),u,(0,o.createVNode)(N,{value:t.value.spec.tolerations,"onUpdate:value":a[2]||(a[2]=e=>t.value.spec.tolerations=e),mode:t.mode},null,8,["value","mode"])]),(0,o.createElementVNode)("div",null,[c,i,(0,o.createElementVNode)("div",d,[(0,o.createVNode)(w,{value:p.analyzeLocalOnly,"onUpdate:value":a[3]||(a[3]=e=>p.analyzeLocalOnly=e),label:e.t("sr.reviewBundle.analyzeLocalOnly"),mode:t.mode},null,8,["value","label","mode"])])])])),_:1},8,["done-route","mode","resource","errors","validation-passed","onFinish","onCancel"])):((0,o.openBlock)(),(0,o.createBlock)(h,{key:0}))}var p=t(84409),v=t(32468),h=t(91825),b=t(14220),y=t(35664),N=t(69141),w=t(34121),C=t(9853),E=t(59378),f=t(4364),V={name:"ReviewBundleEditView",components:{Checkbox:N.A,CruResource:v.A,Loading:p.A,Tolerations:w.A,LabeledInput:C.A,TextAreaAutoGrow:E.A},mixins:[h.A],props:{value:{type:Object,required:!0},mode:{type:String,required:!0},resource:{type:String,required:!0}},data(){return this.value.metadata.name||(this.value.metadata.generateName="review-bundle-"),this.value.spec||(this.value.spec={}),this.value.spec.analyzeClusters=["local"],this.value.spec.sonobuoyNamespace="sonobuoy",this.isCreate()&&this.createApiToken().then((e=>{this.value.spec.token=e})).catch((e=>{f.error(e)})),{analyzeLocalOnly:!0,description:"",customName:"",dropdownOptions:["review-bundle","custom-bundle"],showDropdown:!1}},computed:{isView(){return this.mode!==b.YQ&&this.mode!==b.G5},editorMode(){return this.isView?EDITOR_MODES.VIEW_CODE:EDITOR_MODES.EDIT_CODE},hasBeenCreated(){return!!this.value.id}},watch:{analyzeLocalOnly(e){this.value.spec.analyzeClusters=e?["local"]:[]}},methods:{async createApiToken(){const e=144e5,a=await this.$store.dispatch("rancher/create",{type:y.k$.TOKEN,ttl:e,description:"Supportability Review"}),t=await a.save();return t.token},isCreate(){return this.mode===b.YQ},setDefaultName(){this.value.metadata.generateName=this.value.metadata.generateName.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/^-+/,"").slice(0,30),this.value.metadata.generateName.trim()||(this.value.metadata.generateName="review-bundle-"),this.value.metadata.generateName.endsWith("-")||(this.value.metadata.generateName+="-")},setDefaultSonobuoyNamespace(){this.value.spec.sonobuoyNamespace.trim()||(this.value.spec.sonobuoyNamespace="sonobuoy")}}},g=t(47433);const k=(0,g.A)(V,[["render",m]]);var A=k}}]);
//# sourceMappingURL=supportability-review-app-3.0.0.umd.min.edit.js.map