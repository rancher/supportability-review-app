(("undefined"!==typeof self?self:this)["webpackJsonpsupportability_review_app_2_0_0"]=("undefined"!==typeof self?self:this)["webpackJsonpsupportability_review_app_2_0_0"]||[]).push([[1],{b999:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return e.value?a("CruResource",{attrs:{"done-route":e.doneRoute,"can-yaml":!0,mode:e.mode,resource:e.value,errors:e.errors,"validation-passed":e.isFormValid},on:{error:a=>e.errors=a,finish:e.save,cancel:e.done}},[a("Tabbed",[a("Tab",{attrs:{"label-key":"sr.menuLabels.basic",name:"basic-config",weight:3}},[a("div",[a("h2",{staticClass:"mb-200"},[e._v("Collector Config")]),a("h4",{staticClass:"mb-200"},[e._v("Bundle Name")]),a("LabeledInput",{attrs:{label:"Enter Bundle Name",placeholder:"review-bundle",maxlength:30},on:{blur:e.setDefaultName},model:{value:e.value.metadata.generateName,callback:function(a){e.$set(e.value.metadata,"generateName",a)},expression:"value.metadata.generateName"}}),a("Banner",{staticClass:"mb-10",attrs:{color:"info"}},[a("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("sr.menuLabels.bundleNameRestriction",{},!0),expression:"t('sr.menuLabels.bundleNameRestriction', {}, true)"}]})])],1)]),a("Tab",{attrs:{"label-key":"sr.menuLabels.advanced",name:"advanced-config",weight:2}},[a("div",[a("h2",{staticClass:"mb-200"},[e._v("Collector Config")]),a("h4",{staticClass:"mt-10 mb-200"},[e._v("Sonobuoy Namespace")]),a("LabeledInput",{attrs:{placeholder:"sonobuoy",maxlength:64},on:{blur:e.setDefaultSonobuoyNamespace},model:{value:e.value.spec.sonobuoyNamespace,callback:function(a){e.$set(e.value.spec,"sonobuoyNamespace",a)},expression:"value.spec.sonobuoyNamespace"}}),a("h4",{staticClass:"mt-10 mb-200",attrs:{for:"tolerations"}},[e._v("Tolerations")]),a("Tolerations",{attrs:{mode:e.mode},model:{value:e.value.spec.tolerations,callback:function(a){e.$set(e.value.spec,"tolerations",a)},expression:"value.spec.tolerations"}}),a("h4",{staticClass:"mt-10 mb-200"},[e._v("Bundle Description")]),a("TextAreaAutoGrow",{attrs:{minHeight:"50",placeholder:"Enter bundle description",autocapitalize:"off",spellcheck:"false"}})],1)])],1),e.isPrime?e._e():a("Banner",{staticClass:"mb-10",attrs:{color:"info"}},[a("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("sr.menuLabels.forCommunityUser0",{},!0),expression:"t('sr.menuLabels.forCommunityUser0', {}, true)"}]})]),e.isPrime?e._e():a("Banner",{staticClass:"mb-10",attrs:{color:"info"}},[a("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("sr.menuLabels.forCommunityUser1",{},!0),expression:"t('sr.menuLabels.forCommunityUser1', {}, true)"}]})]),e.isPrime?a("Banner",{staticClass:"mb-10",attrs:{color:"info"}},[a("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("sr.menuLabels.forCommunityUser1",{},!0),expression:"t('sr.menuLabels.forCommunityUser1', {}, true)"}]})]):e._e()],1):a("Loading")},r=[],o=t("15ca"),n=t("fd5f"),i=t("0cb2"),l=t("38de"),c=t("305c"),u=t("da25"),m=t("907c"),d=t("6418"),p=t("8d0e"),h=t("e26b"),v=t("c230"),b={name:"ReviewBundleEditView",components:{Banner:d["a"],CruResource:n["a"],LabeledInput:h["a"],Loading:o["a"],Tabbed:i["a"],Tab:l["a"],TextAreaAutoGrow:v["a"],Tolerations:p["a"]},mixins:[c["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0},resource:{type:String,required:!0}},data(){return this.mode===u["o"]&&(this.value.metadata.name||(this.value.metadata.generateName="review-bundle-"),this.value.spec||(this.value.spec={}),this.value.spec.analyzeClusters=["local"],this.value.spec.sonobuoyNamespace="sonobuoy",this.createApiToken().then(e=>{this.value.spec.token=e}).catch(e=>{console.error(e)}),fetch("/v3/settings/server-url",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(e=>{if(!e.ok)throw new Error("HTTP error! Status: "+e.status);return e.json()}).then(e=>{this.value.spec.hostName=e.value}).catch(e=>{console.error("Fetch error:",e)}),fetch("/rancherversion",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(e=>{if(!e.ok)throw new Error("HTTP error! Status: "+e.status);return e.json()}).then(e=>{"false"===e.RancherPrime?(this.value.spec.collectClusters=["local"],this.isPrime=!1):this.isPrime=!0}).catch(e=>{console.error("Fetch error:",e)})),{description:"",isPrime:!0}},computed:{isView(){return this.mode!==u["o"]&&this.mode!==u["q"]},editorMode(){return this.isView?EDITOR_MODES.VIEW_CODE:EDITOR_MODES.EDIT_CODE},hasBeenCreated(){return!!this.value.id}},watch:{},methods:{async createApiToken(){const e=144e5,a=await this.$store.dispatch("rancher/create",{type:m["q"].TOKEN,ttl:e,description:"Supportability Review"}),t=await a.save();return t.token},setDefaultName(){this.value.metadata.generateName=this.value.metadata.generateName.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/^-+/,"").slice(0,30),this.value.metadata.generateName.trim()||(this.value.metadata.generateName="review-bundle-"),this.value.metadata.generateName.endsWith("-")||(this.value.metadata.generateName+="-")},setDefaultSonobuoyNamespace(){this.value.spec.sonobuoyNamespace.trim()||(this.value.spec.sonobuoyNamespace="sonobuoy")}}},f=b,y=t("2be6"),N=Object(y["a"])(f,s,r,!1,null,"9abdb9fc",null);a["default"]=N.exports}}]);
//# sourceMappingURL=supportability-review-app-2.0.0.umd.min.edit.js.map