(("undefined"!==typeof self?self:this)["webpackJsonpsupportability_review_app_2_0_0"]=("undefined"!==typeof self?self:this)["webpackJsonpsupportability_review_app_2_0_0"]||[]).push([[1],{b999:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return e.value?a("CruResource",{attrs:{"done-route":e.doneRoute,"can-yaml":!0,mode:e.mode,resource:e.value,errors:e.errors,"validation-passed":e.isFormValid},on:{error:a=>e.errors=a,finish:e.save,cancel:e.done}},[a("Tabbed",[a("Tab",{attrs:{"label-key":"sr.supportabilityReview.basic",name:"basic-config",weight:3}},[a("div",[a("h2",{staticClass:"mb-200"},[e._v("Collector Config")]),a("h4",{staticClass:"mb-200"},[e._v("Bundle Name")]),a("LabeledInput",{attrs:{label:"Enter Bundle Name",placeholder:"review-bundle",maxlength:30},on:{blur:e.setDefaultName},model:{value:e.value.metadata.generateName,callback:function(a){e.$set(e.value.metadata,"generateName",a)},expression:"value.metadata.generateName"}}),a("Banner",{staticClass:"mb-10",attrs:{color:"info"}},[a("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("sr.supportabilityReview.bundleNameRestriction",{},!0),expression:"t('sr.supportabilityReview.bundleNameRestriction', {}, true)"}]})])],1)]),a("Tab",{attrs:{"label-key":"sr.supportabilityReview.advanced",name:"advanced-config",weight:2}},[a("div",[a("h2",{staticClass:"mb-200"},[e._v("Collector Config")]),a("h4",{staticClass:"mt-10 mb-200"},[e._v("Sonobuoy Namespace")]),a("LabeledInput",{attrs:{placeholder:"sonobuoy",maxlength:64},on:{blur:e.setDefaultSonobuoyNamespace},model:{value:e.value.spec.sonobuoyNamespace,callback:function(a){e.$set(e.value.spec,"sonobuoyNamespace",a)},expression:"value.spec.sonobuoyNamespace"}}),a("h4",{staticClass:"mt-10 mb-200",attrs:{for:"tolerations"}},[e._v("Tolerations")]),a("Tolerations",{attrs:{mode:e.mode},model:{value:e.value.spec.tolerations,callback:function(a){e.$set(e.value.spec,"tolerations",a)},expression:"value.spec.tolerations"}}),a("h4",{staticClass:"mt-10 mb-200"},[e._v("Bundle Description")]),a("TextAreaAutoGrow",{attrs:{minHeight:"50",placeholder:"Enter bundle description",autocapitalize:"off",spellcheck:"false"}})],1),a("div",[a("h2",{staticClass:"mt-10 mb-200"},[e._v("Analyzer Config")]),a("div",{staticClass:"col span-8 mb-20"},[a("Checkbox",{attrs:{label:e.t("sr.reviewBundle.analyzeLocalOnly"),mode:e.mode},model:{value:e.analyzeLocalOnly,callback:function(a){e.analyzeLocalOnly=a},expression:"analyzeLocalOnly"}})],1)])])],1)],1):a("Loading")},o=[],l=t("15ca"),n=t("fd5f"),i=t("0cb2"),r=t("38de"),c=t("305c"),u=t("da25"),d=t("907c"),m=t("6418"),p=t("1032"),b=t("8d0e"),v=t("e26b"),h=t("c230"),y={name:"ReviewBundleEditView",components:{Banner:m["a"],Checkbox:p["a"],CruResource:n["a"],LabeledInput:v["a"],Loading:l["a"],Tabbed:i["a"],Tab:r["a"],TextAreaAutoGrow:h["a"],Tolerations:b["a"]},mixins:[c["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0},resource:{type:String,required:!0}},data(){return this.value.metadata.name||(this.value.metadata.generateName="review-bundle-"),this.value.spec||(this.value.spec={}),this.value.spec.analyzeClusters=["local"],this.value.spec.sonobuoyNamespace="sonobuoy",this.isCreate()&&this.createApiToken().then(e=>{this.value.spec.token=e}).catch(e=>{console.error(e)}),{analyzeLocalOnly:!0,description:"",customName:"",dropdownOptions:["review-bundle","custom-bundle"],showDropdown:!1}},computed:{isView(){return this.mode!==u["o"]&&this.mode!==u["q"]},editorMode(){return this.isView?EDITOR_MODES.VIEW_CODE:EDITOR_MODES.EDIT_CODE},hasBeenCreated(){return!!this.value.id}},watch:{analyzeLocalOnly(e){this.value.spec.analyzeClusters=e?["local"]:[]}},methods:{async createApiToken(){const e=144e5,a=await this.$store.dispatch("rancher/create",{type:d["q"].TOKEN,ttl:e,description:"Supportability Review"}),t=await a.save();return t.token},isCreate(){return this.mode===u["o"]},setDefaultName(){this.value.metadata.generateName=this.value.metadata.generateName.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/^-+/,"").slice(0,30),this.value.metadata.generateName.trim()||(this.value.metadata.generateName="review-bundle-"),this.value.metadata.generateName.endsWith("-")||(this.value.metadata.generateName+="-")},setDefaultSonobuoyNamespace(){this.value.spec.sonobuoyNamespace.trim()||(this.value.spec.sonobuoyNamespace="sonobuoy")}}},f=y,w=t("2be6"),N=Object(w["a"])(f,s,o,!1,null,"28e09a02",null);a["default"]=N.exports}}]);
//# sourceMappingURL=supportability-review-app-2.0.0.umd.min.edit.js.map